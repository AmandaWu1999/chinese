<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>華語聽力練習 V6.0</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@600&family=Zen+Maru+Gothic:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    
    <style>
        /* --- 基礎設定 --- */
        :root { --bg: #fff; --text: #333; --card: #fff; --primary: #555; --border: #ccc; --radius: 10px; --font: 'Microsoft JhengHei', sans-serif; }
        body { margin: 0; padding: 20px; font-family: var(--font); background: var(--bg); color: var(--text); display: flex; flex-direction: column; align-items: center; min-height: 100vh; transition: 0.3s; background-attachment: fixed; }
        
        .container { 
            background: var(--card); padding: 30px; width: 95%; max-width: 800px; 
            border-radius: var(--radius); border: 2px solid var(--border); 
            margin-bottom: 20px; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .btn { background: var(--primary); color: #fff; border: none; padding: 10px 25px; border-radius: var(--radius); cursor: pointer; font-size: 16px; margin: 5px; font-family: inherit; transition: 0.2s; box-shadow: 0 3px 0 rgba(0,0,0,0.2); }
        .btn:active { transform: translateY(3px); box-shadow: none; }
        
        input, textarea, select { width: 100%; padding: 12px; margin: 10px 0; border: 2px solid var(--border); border-radius: var(--radius); box-sizing: border-box; font-family: inherit; font-size: 16px;}

        /* 詞卡通用 */
        .word-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; min-height: 100px; padding: 25px; border: 2px dashed var(--border); border-radius: var(--radius); background: rgba(255,255,255,0.4); margin: 20px 0; }
        .word-card { background: #fff; border: 2px solid var(--primary); padding: 12px 20px; border-radius: var(--radius); cursor: grab; font-size: 20px; font-weight: bold; user-select: none; touch-action: none; box-shadow: 3px 3px 0 rgba(0,0,0,0.15); transition: transform 0.1s; }
        .word-card:active { transform: scale(0.95); }
        .sortable-ghost { opacity: 0.4; background: #eee; } .sortable-drag { transform: rotate(3deg) scale(1.1); cursor: grabbing; }

        /* --- 十大風格定義 --- */
        body.style-morandi { --bg: #D8E2DC; --card: #F9F7F2; --primary: #9D8189; --text: #6D6875; --border: #B5B2BE; --radius: 12px; --font: 'Noto Serif TC', serif; }
        body.style-morandi .container { border: none; box-shadow: 0 10px 30px rgba(157, 129, 137, 0.2); }

        body.style-watercolor { --bg: #E3F2FD; --card: rgba(255,255,255,0.9); --primary: #0288D1; --text: #01579B; --border: #81D4FA; --radius: 25px; --font: 'Zen Maru Gothic', sans-serif; background-image: radial-gradient(circle at 10% 10%, #B3E5FC 0%, transparent 40%), radial-gradient(circle at 90% 80%, #E1F5FE 0%, transparent 40%); }
        body.style-watercolor .word-card { border-color: #B3E5FC; box-shadow: 0 5px 15px rgba(3,169,244,0.2); color: #0277BD; }

        body.style-flat { --bg: #FFD54F; --card: #FFF; --primary: #000; --text: #000; --border: #000; --radius: 0px; --font: 'Microsoft JhengHei', sans-serif; }
        body.style-flat .container { border: 4px solid #000; box-shadow: 8px 8px 0 #000; }
        body.style-flat .btn { border: 3px solid #000; background: #29B6F6; color: #000; font-weight: 900; box-shadow: 4px 4px 0 #000; }
        body.style-flat .word-card { border: 3px solid #000; box-shadow: 5px 5px 0 #000; background: #FF8A65; color: #fff; }

        body.style-geometric { --bg: #212121; --card: #333; --primary: #00E676; --text: #EEE; --border: #444; --radius: 5px; --font: sans-serif; background-image: linear-gradient(30deg, #2a2a2a 12%, transparent 12.5%, transparent 87%, #2a2a2a 87.5%, #2a2a2a), linear-gradient(150deg, #2a2a2a 12%, transparent 12.5%, transparent 87%, #2a2a2a 87.5%, #2a2a2a); background-size: 40px 70px; }
        body.style-geometric .container { border: 1px solid #555; box-shadow: 0 0 20px rgba(0,230,118,0.1); }
        body.style-geometric .word-card { background: #424242; color: #fff; border: 1px solid #00E676; }

        body.style-scene { --bg: #D7CCC8; --card: #FFF3E0; --primary: #5D4037; --text: #3E2723; --border: #8D6E63; --radius: 8px; --font: 'Noto Serif TC', serif; background: repeating-linear-gradient(45deg, #bcaaa4, #bcaaa4 10px, #a1887f 10px, #a1887f 20px); }
        body.style-scene .container { border: 6px solid #5D4037; background: #FFF8E1; }
        body.style-scene .word-card { background: #EFEBE9; border-bottom: 4px solid #8D6E63; }

        body.style-cute { --bg: #81D4FA; --card: #fff; --primary: #FF80AB; --text: #880E4F; --border: #fff; --radius: 30px; --font: 'Zen Maru Gothic', sans-serif; background-image: radial-gradient(circle 20px at 10% 20%, white 99%, transparent 100%), radial-gradient(circle 30px at 15% 15%, white 99%, transparent 100%), radial-gradient(circle 15px at 80% 80%, white 99%, transparent 100%); background-size: 200px 200px; }
        body.style-cute .container { border: 5px solid #FFF; box-shadow: 0 10px 0 rgba(255,255,255,0.3); }

        body.style-print { --bg: #EFE6DD; --card: #FDFBF7; --primary: #2C2C2C; --text: #2C2C2C; --border: #2C2C2C; --radius: 4px; --font: serif; }
        body.style-print .container { border-width: 3px; background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjRkRGQkY3Ii8+CjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9IiNDQ0MiLz4KPC9zdmc+'); } 
        body.style-print .word-card { box-shadow: 4px 4px 0 #2C2C2C; border-width: 2px; }

        body.style-icon { --bg: #f0f0f0; --card: #fff; --primary: #6200EA; --text: #000; --border: #E0E0E0; --radius: 8px; --font: monospace; background-image: linear-gradient(#ccc 1px, transparent 1px), linear-gradient(90deg, #ccc 1px, transparent 1px); background-size: 20px 20px; }
        body.style-icon .word-card { border: 2px solid #6200EA; color: #6200EA; background: #EDE7F6; }

        body.style-hybrid { --bg: #eee; --card: #fff; --primary: #1565C0; --text: #333; --border: #90CAF9; --radius: 2px; --font: cursive; background-color: #f4f3f2; }
        body.style-hybrid .container { background-image: linear-gradient(#e1e1e1 1px, transparent 1px); background-size: 100% 1.5em; border-left: 5px double #ef5350; padding-left: 40px; }
        body.style-hybrid .word-card { font-family: 'Microsoft JhengHei', sans-serif; transform: rotate(-1deg); box-shadow: 2px 2px 5px rgba(0,0,0,0.1); }

        body.style-chalk { --bg: #2B3A2E; --card: #344838; --primary: #D84315; --text: #EEE; --border: #EEE; --radius: 5px; --font: sans-serif; background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVp
