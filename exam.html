<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆæ¸¬ç·´ç¿’ B4 (L1-L10) ç¶œåˆæ¸¬é©—2</title>
    <style>
        /* CSS æ¨£å¼ç¶­æŒä¸è®Šï¼Œçœç•¥ä»¥ç¯€çœç¯‡å¹…ï¼Œè«‹ä¿ç•™åŸæœ¬çš„æ¨£å¼ */
        body { font-family: "Microsoft JhengHei", "Heiti TC", sans-serif; background-color: #f4f4f9; margin: 0; padding: 20px; color: #333; }
        .container { max-width: 800px; margin: 0 auto; background: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1, h2, h3 { text-align: center; color: #2c3e50; }
        h2 { border-bottom: 2px solid #eee; padding-bottom: 10px; margin-top: 30px; text-align: left; font-size: 1.2em; }
        .section-desc { background-color: #e8f4fc; padding: 10px; border-radius: 5px; margin-bottom: 15px; font-size: 0.9em; color: #555; }
        .student-info { background-color: #fdfdfd; border: 1px solid #ddd; padding: 20px; border-radius: 5px; margin-bottom: 20px; }
        .question-block { margin-bottom: 20px; padding: 15px; border-bottom: 1px dashed #eee; }
        .question-title { font-weight: bold; margin-bottom: 10px; display: block; }
        .options label { display: block; margin-bottom: 8px; cursor: pointer; padding: 5px; border-radius: 4px; }
        .options label:hover { background-color: #f0f0f0; }
        input[type="radio"] { margin-right: 10px; }
        .btn-submit { display: block; width: 100%; padding: 15px; background-color: #3498db; color: white; font-size: 1.2em; border: none; border-radius: 5px; cursor: pointer; margin-top: 30px; }
        .btn-submit:hover { background-color: #2980b9; }
        .result-area { display: none; margin-top: 30px; padding: 20px; background-color: #dff0d8; border: 1px solid #d6e9c6; border-radius: 5px; color: #3c763d; }
        .score-display { font-size: 2em; text-align: center; font-weight: bold; margin: 20px 0; }
        .review-area { margin-top: 20px; border-top: 2px solid #ccc; padding-top: 20px; }
        .wrong-answer { background-color: #ffe6e6; padding: 10px; border-radius: 5px; }
        .correct-answer-text { color: #c0392b; font-weight: bold; display: block; margin-top: 5px; }
        
        .btn-play {
            background-color: #2ecc71;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            margin-bottom: 10px;
            display: inline-flex;
            align-items: center;
        }
        .btn-play:hover { background-color: #27ae60; }
        .btn-play.playing { background-color: #e74c3c; }
        
        /* éŒ¯èª¤è¨Šæ¯æç¤º */
        #error-msg {
            display: none;
            background-color: #fce4e4;
            border: 1px solid #fcc2c3;
            color: #cc0033;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>æˆæ¸¬ç·´ç¿’ B4 (L1-L10) ç¶œåˆæ¸¬é©—2</h1>
    
    <div id="error-msg"></div>

    <div class="student-info">
        <label for="studentName"><strong>è«‹è¼¸å…¥æ‚¨çš„å§“å / å­¸è™Ÿï¼š</strong></label>
        <input type="text" id="studentName" style="padding: 5px; width: 60%; margin-left: 10px;" placeholder="ä¾‹å¦‚ï¼šç‹å°æ˜">
    </div>

    <div style="text-align:center; margin-bottom: 20px;">
        <button type="button" class="btn-play" style="background-color: #95a5a6;" onclick="testAudio()">ğŸ”Š æ¸¬è©¦å–‡å­ (è€ƒå‰è«‹å…ˆé»æˆ‘æ¸¬è©¦)</button>
    </div>

    <form id="quizForm">
        <h2>ä¸€ã€å°è©±è½åŠ› (10%)</h2>
        <div class="section-desc">è«‹é»æ“Šé¡Œç›®ä¸Šæ–¹çš„ã€Œæ’­æ”¾éŸ³æª”ã€æŒ‰éˆ•ï¼Œè½å®Œå°è©±å¾Œé¸å‡ºæ­£ç¢ºç­”æ¡ˆ (æ¯é¡Œ 2 åˆ†)ã€‚</div>
        <div id="part1-questions"></div>

        <h2>ç¬¬äºŒéƒ¨åˆ† è½åŠ› - å®Œæˆå°è©± (20%)</h2>
        <div class="section-desc">è«‹è½ A çš„èªªæ³•ï¼Œé¸å‡º B æœ€åˆç†çš„å›ç­” (æ¯é¡Œ 2 åˆ†)ã€‚</div>
        <div id="part2-questions"></div>

        <h2>ç¬¬ä¸‰éƒ¨åˆ† è½åŠ› - ç¯‡ç« è½åŠ› (10%)</h2>
        <div class="section-desc">è«‹å…ˆæ’­æ”¾çŸ­æ–‡éŸ³æª”ï¼Œè½å®Œå¾Œå›ç­”ç¬¬ 16-20 é¡Œ (æ¯é¡Œ 2 åˆ†)ã€‚</div>
        
        <div style="background:#f9f9f9; padding:20px; border-left: 5px solid #2ecc71; margin-bottom:20px;">
            <p><strong>ğŸ“° è½åŠ›çŸ­æ–‡å€</strong></p>
            <button type="button" class="btn-play" onclick="playPassage(this)">ğŸ”Š æ’­æ”¾çŸ­æ–‡éŸ³æª”</button>
            <p style="font-size:0.8em; color:#666;">(é»æ“Šæ’­æ”¾å¾Œï¼Œè«‹æ ¹æ“šå…§å®¹å›ç­”ä¸‹æ–¹äº”å€‹å•é¡Œ)</p>
        </div>

        <div id="part3-questions"></div>

        <h2>è®€å¯«éƒ¨åˆ† ä¸€ã€å¡«ç©º (10%)</h2>
        <div id="rw1-questions"></div>

        <h2>è®€å¯«éƒ¨åˆ† äºŒã€æ–‡æ„ç†è§£ (10%)</h2>
        <div id="rw2-questions"></div>

        <h2>è®€å¯«éƒ¨åˆ† ä¸‰ã€çŸ­æ–‡å¡«ç©º (20%)</h2>
        <div style="background-color: #fff9e6; padding: 15px; border-radius: 5px; line-height: 1.6; margin-bottom: 20px;">
            <p>ç¾åœ¨çš„å¤§å­¸ç”Ÿæ­£é¢å°è‘—åš´æ ¼çš„å°±æ¥­è€ƒé©—ã€‚ç”±æ–¼å…¨çƒç¶“æ¿Ÿ <strong>(21)</strong>ï¼Œè¨±å¤šä¼æ¥­ç‚ºäº†ç¯€çœæˆæœ¬ï¼Œéƒ½æ¸›å°‘æ‡‰å¾µäººæ‰ï¼Œç”šè‡³è£å“¡ã€‚åœ¨é€™æ¨£çš„ <strong>(22)</strong> ä¸‹ï¼Œç¤¾æœƒæ–°é®®äººæƒ³è¦æ‰¾åˆ°ä¸€ä»½ç†æƒ³çš„å·¥ä½œï¼Œè®Šå¾—è¶Šä¾†è¶Šå›°é›£ã€‚</p>
            <p>å¾ˆå¤šå¤§å­¸ç”Ÿç•¢æ¥­å¾Œï¼Œç™¼ç¾è‡ªå·±æ‰€å­¸çš„çŸ¥è­˜èˆ‡è·å ´éœ€æ±‚æœ‰è½å·®ï¼Œ<strong>(23)</strong> æ„Ÿåˆ°ç„¦æ…®ä¸å®‰ã€‚æœ‰çš„å­¸ç”Ÿç‚ºäº†é€ƒé¿å°±æ¥­å£“åŠ›ï¼Œé¸æ“‡ç¹¼çºŒå¿µç ”ç©¶æ‰€ï¼›æœ‰çš„å‰‡é¸æ“‡ç•¶ã€Œå•ƒè€æ—ã€ï¼Œåœ¨å®¶ä¾é çˆ¶æ¯ã€‚ä½†æ˜¯ï¼Œé€™äº›éƒ½ä¸èƒ½é•·ä¹…ã€‚</p>
            <p>å°ˆå®¶å»ºè­°ï¼Œå¤§å­¸ç”Ÿæ‡‰è©²åœ¨æ ¡æœŸé–“å°±åŠªåŠ› <strong>(24)</strong> å¯¦ç¿’æ©Ÿæœƒï¼Œææ—©èªè­˜è·å ´ã€‚é€éå¯¦ç¿’ï¼Œä¸åªå¯ä»¥ç´¯ç©ç¶“é©—ï¼Œé‚„èƒ½ <strong>(25)</strong> è‡ªå·±æ˜¯å¦é©åˆé€™å€‹è¡Œæ¥­ã€‚æ­¤å¤–ï¼ŒåŸ¹é¤Šç¬¬äºŒå°ˆé•·åŠåŠ å¼·å¤–èªèƒ½åŠ›ï¼Œä¹Ÿ <strong>(26)</strong> æé«˜æœªä¾†çš„ç«¶çˆ­åŠ›ã€‚</p>
            <p>é¢å°é¢è©¦æ™‚ï¼Œé™¤äº†æœè£å„€å®¹è¦æ•´é½Šï¼Œæ›´è¦å°æ‡‰å¾µçš„å…¬å¸æœ‰ <strong>(27)</strong> çš„äº†è§£ã€‚å›ç­”å•é¡Œæ™‚è¦èªçœŸã€æœ‰è‡ªä¿¡ï¼Œä¸¦ä¸”å±•ç¾å‡ºé¡˜æ„å­¸ç¿’çš„æ…‹åº¦ã€‚<strong>(28)</strong> è¢«æ‹’çµ•äº†ï¼Œä¹Ÿä¸è¦æ”¾æ£„ï¼Œè¦æŠŠæ¯ä¸€æ¬¡çš„å¤±æ•—ç•¶ä½œæ˜¯ç¶“é©—ã€‚ ç¸½è€Œè¨€ä¹‹ï¼Œæ©Ÿæœƒæ˜¯ç•™çµ¦æœ‰æº–å‚™çš„äººã€‚åªè¦å…·å‚™è¶³å¤ çš„å¯¦åŠ›èˆ‡æ­£ç¢ºçš„æ…‹åº¦ï¼Œ<strong>(29)</strong> ç’°å¢ƒå†å·®ï¼Œ<strong>(30)</strong> èƒ½æ‰¾åˆ°å±¬æ–¼è‡ªå·±çš„ä¸€ç‰‡å¤©ã€‚</p>
        </div>
        <div id="rw3-questions"></div>

        <button type="button" class="btn-submit" onclick="submitQuiz()">äº¤å·ä¸¦æŸ¥çœ‹æˆç¸¾</button>
    </form>

    <div id="result" class="result-area">
        <h3>æ¸¬é©—çµæœ</h3>
        <p>è€ƒç”Ÿå§“åï¼š<span id="resultName"></span></p>
        <div class="score-display">å¾—åˆ†ï¼š<span id="score">0</span> / 80</div>
        <p class="note">* æ»¿åˆ† 80 åˆ†ï¼Œå¦æœ‰è€å¸«å–®ç¨æ¸¬é©—çš„ 20 åˆ†ï¼Œå°‡å¦å¤–è¨ˆç®—ã€‚</p>
        <div id="review" class="review-area"></div>
    </div>
</div>

<script>
    // æª¢æŸ¥ç€è¦½å™¨æ”¯æ´
    if (!('speechSynthesis' in window)) {
        const errorDiv = document.getElementById('error-msg');
        errorDiv.style.display = 'block';
        errorDiv.innerText = "âš ï¸ æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´èªéŸ³æ’­æ”¾åŠŸèƒ½ï¼Œè«‹å˜—è©¦ä½¿ç”¨ Chromeã€Edge æˆ– Safari ç€è¦½å™¨ã€‚";
    }

    const synth = window.speechSynthesis;

    // è§£æ±º Chrome èªéŸ³åŠ è¼‰å•é¡Œ
    let voices = [];
    function loadVoices() {
        voices = synth.getVoices();
    }
    loadVoices();
    if (speechSynthesis.onvoiceschanged !== undefined) {
        speechSynthesis.onvoiceschanged = loadVoices;
    }

    // æ¸¬è©¦æŒ‰éˆ•
    function testAudio() {
        synth.cancel(); // ç¢ºä¿åœæ­¢ä¹‹å‰çš„è²éŸ³
        const utterance = new SpeechSynthesisUtterance("æ¸¬è©¦æˆåŠŸï¼Œè²éŸ³æ­£å¸¸ã€‚");
        utterance.lang = 'zh-TW';
        synth.speak(utterance);
    }

    function speakText(text, btnElement) {
        if (!('speechSynthesis' in window)) {
            alert("æ‚¨çš„è¨­å‚™ä¸æ”¯æ´èªéŸ³åŠŸèƒ½");
            return;
        }

        // å¼·åˆ¶é‡ç½®ï¼Œè§£æ±ºæœ‰æ™‚å€™å¡ä½çš„å•é¡Œ
        synth.cancel();

        if (btnElement && btnElement.classList.contains('playing')) {
            resetAllButtons();
            return;
        }

        resetAllButtons();
        if(btnElement) {
            btnElement.classList.add('playing');
            btnElement.innerText = "â¹ åœæ­¢æ’­æ”¾";
        }

        const utterance = new SpeechSynthesisUtterance(text);
        
        // å˜—è©¦æŒ‡å®šä¸­æ–‡èªéŸ³ï¼Œå¦‚æœæ²’æœ‰å‰‡ä½¿ç”¨é è¨­
        const zhVoice = voices.find(v => v.lang.includes('zh-TW') || v.lang.includes('zh-HK') || v.lang.includes('zh'));
        if (zhVoice) {
            utterance.voice = zhVoice;
        }
        
        utterance.lang = 'zh-TW';
        utterance.rate = 0.9;

        utterance.onend = function() {
            resetAllButtons();
        };

        utterance.onerror = function(e) {
            console.error('Speech error:', e);
            resetAllButtons();
        };

        synth.speak(utterance);
    }

    function resetAllButtons() {
        document.querySelectorAll('.btn-play').forEach(btn => {
            btn.classList.remove('playing');
            if(btn.innerText.includes("æ¸¬è©¦")) {
                 btn.innerText = "ğŸ”Š æ¸¬è©¦å–‡å­ (è€ƒå‰è«‹å…ˆé»æˆ‘æ¸¬è©¦)";
            } else if(btn.innerText.includes("çŸ­æ–‡")) {
                btn.innerText = "ğŸ”Š æ’­æ”¾çŸ­æ–‡éŸ³æª”";
            } else {
                btn.innerText = "ğŸ”Š æ’­æ”¾éŸ³æª”";
            }
        });
    }

    const passageScript = `
        å¾ˆå¤šäººèªªã€Œå¤§å­¸æ–‡æ†‘ã€æ˜¯æ±‚è·çš„ä¿è­‰ï¼Œä½†æ ¹æ“šæœ€æ–°çš„èª¿æŸ¥é¡¯ç¤ºï¼Œç¾åœ¨å…¬å¸åœ¨ æ‡‰å¾µ æ–°äººæ™‚ï¼Œåè€Œæ›´çœ‹é‡ã€Œç¶“é©—ã€èˆ‡ã€Œå·¥ä½œæ…‹åº¦ã€ã€‚
        è¨±å¤šç¤¾æœƒæ–°é®®äººé›–ç„¶æ“æœ‰é«˜å­¸æ­·ï¼Œå»å› ç‚ºç¼ºå°‘å¯¦ç¿’ç¶“é©—ï¼Œæˆ–çœ¼é«˜æ‰‹ä½ï¼Œä¸é¡˜æ„å¾åŸºæœ¬åšèµ·ï¼Œå°è‡´åœ¨æ±‚è·éç¨‹ä¸­ç¢°åˆ°è¨±å¤šå•é¡Œã€‚æœ‰çš„å¹´è¼•äººç”šè‡³å› ç‚ºå—ä¸äº†ä¸€é»å£“åŠ›å°±é›¢è·ï¼Œè¢«å«åšã€Œè‰è“æ—ã€ã€‚é€™è®“è¨±å¤šè€é—†èªªï¼Œç¾åœ¨è¦æ‰¾åˆ°åˆé©çš„å“¡å·¥ï¼Œç°¡ç›´æ¯”å¤ªé›£äº†ã€‚
        ç„¶è€Œï¼Œä¹Ÿæœ‰ä¸å°‘å¤§å­¸ç”Ÿåœ¨å­¸æ ¡æ™‚å°±èªçœŸåƒåŠ ç¤¾åœ˜ï¼Œæˆ–æ˜¯åˆ©ç”¨å¯’æš‘å‡å»å¯¦ç¿’ã€‚ä»–å€‘ä¸åªå­¸åˆ°äº†å°ˆæ¥­çŸ¥æ˜¯ï¼Œæ›´ææ—©é©æ‡‰äº†è·å ´æ–‡åŒ–ã€‚é€™äº›å…·å‚™å¯¦åŠ›çš„å­¸ç”Ÿï¼Œå¾€å¾€åœ¨ç•¢æ¥­å‰å°±è¢«å¤§å…¬å¸é è¨‚äº†ã€‚
        å› æ­¤ï¼Œå°ˆå®¶å»ºè­°å¤§å­¸ç”Ÿï¼Œèˆ‡å…¶ç›²ç›®è¿½æ±‚é«˜å­¸æ­·ï¼Œä¸å¦‚å¤šå¢åŠ å¯¦å‹™ç¶“é©—ï¼ŒåŸ¹é¤Šè§£æ±ºå•é¡Œçš„èƒ½åŠ›ã€‚ç•¢ç«Ÿï¼Œå­¸æ­·åªæ˜¯é–€ç¥¨ï¼Œæœ‰å¯¦åŠ›æ‰èƒ½åœ¨è·å ´ç”Ÿå­˜ä¸‹å»ã€‚
    `;

    function playPassage(btn) {
        speakText(passageScript, btn);
    }

    const quizData = {
        part1: [
            { script: "A: è½èªªå··å£é‚£å®¶é–‹äº†ä¸‰åå¹´çš„è€åº—ï¼Œä¸‹å€‹æœˆå°±è¦é—œé–€äº†ï¼ŒçœŸå¯éŒ«ã€‚ B:æ¢…è¾¦æ³•ï¼Œç¾åœ¨é‚£å€‹åœ°æ–¹å·²ç¶“æ²’è½äº†ï¼Œå†åŠ ä¸Šæ™¯æ°£ä¸å¥½ï¼Œè€é—†èªªå†é€™æ¨£ä¸‹å»ï¼Œé€£é¤Šå®¶æ´»å£éƒ½æœ‰å•é¡Œã€‚ è«‹å•ï¼Œé€™ä½å…ˆç”Ÿçš„æ„æ€æ˜¯ä»€éº¼ï¼Ÿ", q: "1. (A) å› ç‚ºå°‘å­åŒ–çš„é—œä¿‚ï¼Œé€™å®¶åº—å€’é–‰äº†ã€‚ (B) é›–ç„¶ç”Ÿæ„ä¸å¥½ï¼Œä½†è€é—†é‚„æ˜¯å …æŒç¶“ç‡Ÿä¸‹å»ã€‚ (C) é€™å®¶åº—çš„ç”Ÿæ„ä¸€ç›´éƒ½å¾ˆèˆˆç››ï¼Œæ²’æœ‰å—åˆ°å½±éŸ¿ã€‚", options: ["A", "B", "C"], ans: 0 },
            { script: "A: é€™å®¶å…¬å¸çš„èµ·è–ªé›–ç„¶ä¸é«˜ï¼Œä½†æ˜¯ç¦åˆ©åˆ¶åº¦å¾ˆå®Œå–„ï¼Œè€Œä¸”é‚„æœ‰å‡ºåœ‹é€²ä¿®çš„æ©Ÿæœƒã€‚ B: å°ç¤¾æœƒæ–°é®®äººè€Œè¨€ï¼Œèƒ½æœ‰é€™æ¨£çš„ç£¨ç·´æ©Ÿæœƒå¾ˆé›£å¾—ï¼Œè–ªæ°´å°‘ä¸€é»æˆ‘ä¹Ÿé¡˜æ„çˆ­å–ã€‚ è«‹å•ï¼Œé€™ä½å…ˆç”Ÿçš„æ…‹åº¦æ˜¯ä»€éº¼ï¼Ÿ", q: "2. (A) ä»–è¦ºå¾—é€™ä»½å·¥ä½œçš„èµ·è–ªå¤ªä½äº†ã€‚ (B) ä»–èªç‚ºæ‡‰è©²å…ˆç´¯ç©ç¶“é©—ï¼Œè–ªæ°´æ˜¯å…¶æ¬¡ã€‚ (C) ä»–æ±ºå®šæ”¾æ£„é€™å€‹å·¥ä½œï¼Œå› ç‚ºç¦åˆ©ä¸å¥½ã€‚", options: ["A", "B", "C"], ans: 1 },
            { script: "A: å°æ—èªªä»–ä¸æƒ³çœ‹è€é—†è‡‰è‰²ï¼Œæ‰“ç®—å»éŠ€è¡Œè²¸æ¬¾ï¼Œè‡ªå·±å‰µæ¥­é–‹é¤å»³ã€‚ B:é–‹åº—å“ªæœ‰é‚£åšœå®¹æ˜“ï¼Ÿä»–è„¾æ°£é‚£åšœå ±æš´èºï¼Œåˆæ¢…æœ‰é¤é£²æ¥­çš„ç¶“é©—ï¼Œæˆ‘çœ‹ä»–æ ¹æœ¬ä¸æ˜¯å™¹è€é—†çš„æ–™ã€‚ è«‹å•ï¼Œé€™ä½å°å§è¦ºå¾—æ€åšœæ¨£ï¼Ÿ", q: "3. (A) ä»–èªç‚ºå°æ—ä¸æ˜¯åšç”Ÿæ„çš„æ–™ã€‚ (B) ä»–è¦ºå¾—å°æ—å¾ˆæœ‰å‹‡æ°£ï¼Œæ‡‰è©²é¼“å‹µä»–ã€‚ (C) ä»–æ“”å¿ƒå°æ—çš„è³‡é‡‘ä¸å¤ ï¼Œæœƒè² å‚µã€‚", options: ["A", "B", "C"], ans: 0 },
            { script: "A: è½èªªé¹¿æ¸¯æœ‰å¾ˆå¤šå¤æ©Ÿå’Œç¾é£Ÿï¼Œæˆ‘å€‘æ‰¾æ™‚é–“å»é€›é€›å§ï¼ B: å¥½å•Šï¼é‚£è£¡çš„å¯ºå»Ÿå¤è‰²å¤é¦™ï¼Œå°åƒæ›´æ˜¯è®“äººå‚æ¶ä¸‰å°ºï¼Œæˆ‘å€‘æ‡‰è©²èªªèµ°å°±èµ°ã€‚ è«‹å•ï¼Œé€™ä½å°å§çš„æ„æ€æ˜¯ä»€éº¼ï¼Ÿ", q: "4. (A) å¤§å®¶éƒ½è¦ºå¾—é€™å€‹åœ°æ–¹å¾ˆç„¡èŠã€‚ (B) é€™è£¡çš„é¢¨æ™¯éå¸¸ç¾éº—ï¼Œå€¼å¾—ä¸€çœ‹ã€‚ (C) é€™è£¡çš„äº¤é€šä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥éŠå®¢å¾ˆå°‘ã€‚", options: ["A", "B", "C"], ans: 1 },
            { script: "A: å…’å­æƒ³æ¬å‡ºå»ä½ï¼Œå¯æ˜¯æˆ‘çœŸæ¨ä¸å¾—ï¼Œæ€•ä»–åƒè‹¦ã€‚ B: å­©å­å·²ç¶“æˆå¹´äº†ï¼Œç¸½è©²å­¸æœƒè‡ªé£Ÿå…¶åŠ›ï¼Œå¦³ä¸å¯èƒ½ç…§é¡§ä»–ä¸€è¼©å­ï¼Œé‚„æ˜¯æ”¾æ‰‹è®“ä»–å»è©¦è©¦çœ‹å§ã€‚ è«‹å•ï¼Œé€™ä½å…ˆç”Ÿå»ºè­°é€™ä½å¤ªå¤ªæ€åšœåšï¼Ÿ", q: "5. (A) çˆ¶æ¯æ‡‰è©²éš¨æ™‚é™ªåœ¨å­©å­èº«é‚Šã€‚ (B) å­©å­é•·å¤§äº†ï¼Œæ‡‰è©²å­¸ç¿’ç¨ç«‹ã€‚ (C) çˆ¶æ¯å¹´ç´€å¤§äº†ï¼Œéœ€è¦ä¾é å­©å­ã€‚", options: ["A", "B", "C"], ans: 1 }
        ],
        part2: [
            { script: "A: è½èªªé€™å®¶å…¬å¸çš„é¢è©¦å¾ˆé›£ï¼Œå…‰æ˜¯ç­†è©¦å°±è•©æ‰äº†ä¸€åŠçš„äººã€‚", q: "6. (è«‹é¸å‡º B æœ€åˆç†çš„å›ç­”)", options: ["(A) æ²’éŒ¯ï¼Œé€™å®¶å…¬å¸çš„ç”¢å“éƒ½ä¾†è‡ªåœ‹å¤–ã€‚", "(B) çš„ç¢ºï¼Œæƒ³è¦è¢«éŒ„å–ï¼Œå¾—å…·å‚™çœŸå¯¦åŠ›æ‰è¡Œã€‚", "(C) åæ­£ï¼Œé¢è©¦å®˜å°æˆ‘çš„å°è±¡ä¼¼ä¹ä¸å¤ªå¥½ã€‚"], ans: 1 },
            { script: "A: ä½ æ€åšœè²·äº†é€™åšœå¤šåç‰ŒåŒ…ï¼Ÿä½ çš„è–ªæ°´å¤ ä»˜å—ï¼Ÿ", q: "7. (è«‹é¸å‡º B æœ€åˆç†çš„å›ç­”)", options: ["(A) ç•¶ç„¶ä¸å¤ ï¼Œæ‰€ä»¥æˆ‘é€™å€‹æœˆåªèƒ½éè‹¦å“ˆå“ˆçš„æ—¥å­äº†ã€‚", "(B) å¤ å•Šï¼Œå› ç‚ºé€™äº›åŒ…åŒ…çš„å“è³ªéƒ½åƒå·®ä¸é½Šã€‚", "(C) åˆ¥æ“”å¿ƒï¼Œæˆ‘æŠŠé€™äº›åŒ…åŒ…ç•¶åšæ˜¯åƒåœ¾åˆ†é¡ã€‚"], ans: 0 },
            { script: "A: ç‚ºä»€éº¼é‚£ä½å€™é¸äººçš„æ”¯æŒç‡ä¸€ç›´åœæ»¯ä¸å‰ï¼Ÿ", q: "8. (è«‹é¸å‡º B æœ€åˆç†çš„å›ç­”)", options: ["(A) å› ç‚ºä»–æå‡ºäº†å¾ˆå¤šæœ‰æ•ˆçš„ç¶“æ¿Ÿæ”¿ç­–ã€‚", "(B) ææ€•æ˜¯å› ç‚ºä»–çš„ä¸å¥½çš„æ–°èå½±éŸ¿äº†é¸æ°‘å°ä»–çš„çœ‹æ³•ã€‚", "(C) é›£æ€ªä»–æœƒä»¥é«˜ç¥¨ç•¶é¸ï¼Œæˆç‚ºæ–°çš„é ˜å°äººã€‚"], ans: 1 },
            { script: "A: é€™æ¬¡çš„åœ°éœ‡é€ æˆäº†é€™åšœåš´é‡çš„ç½å®³ï¼Œæ”¿åºœæœ‰ä»€åšœåæ‡‰ï¼Ÿ", q: "9. (è«‹é¸å‡º B æœ€åˆç†çš„å›ç­”)", options: ["(A) æ”¿åºœæ±ºå®šå»¶é•·ç”¢å‡ï¼Œé¼“å‹µå¤§å®¶å¤šç”Ÿè‚²ã€‚", "(B) æ”¿åºœå·²ç¶“æ´¾å‡ºæ•‘æ´éšŠï¼Œä¸¦æä¾›å—ç½æˆ¶è£œåŠ©ã€‚", "(C) æ”¿åºœèªç‚ºé€™æ˜¯å€‹äººçš„å•é¡Œï¼Œèˆ‡æ”¿ç­–ç„¡é—œã€‚"], ans: 1 },
            { script: "A: ä½ çœŸçš„è¦é›¢è·å—ï¼Ÿç¾åœ¨å·¥ä½œé€™éº¼åšœé›£æ‰¾ï¼Œä½ è¦ä¸è¦å†è€ƒæ…®ä¸€ä¸‹ï¼Ÿ", q: "10. (è«‹é¸å‡º B æœ€åˆç†çš„å›ç­”)", options: ["(A) æˆ‘å·²ç¶“è€ƒæ…®å¾—å¾ˆæ¸…æ¥šäº†ï¼Œèˆ‡å…¶åœ¨é€™è£¡çª®å¿™ï¼Œä¸å¦‚å»å‰µæ¥­ã€‚", "(B) æ²’é—œä¿‚ï¼Œåæ­£é€™ä»½å·¥ä½œçš„èµ·è–ªå’Œç¦åˆ©éƒ½å¾ˆå¥½ã€‚", "(C) æˆ‘æ±ºå®šç•™ä¸‹ä¾†ï¼Œå› ç‚ºè€é—†èªªæˆ‘æ˜¯åšç”Ÿæ„çš„æ–™ã€‚"], ans: 0 },
            { script: "A: ç¾ä»£äººæ™šå©šã€ä¸ç”Ÿçš„ç¾è±¡è¶Šä¾†è¶Šæ™®éäº†ï¼Œä½ è¦ºå¾—åŸå› æ˜¯ä»€éº¼ï¼Ÿ", q: "11. (è«‹é¸å‡º B æœ€åˆç†çš„å›ç­”)", options: ["(A) ä¸»è¦æ˜¯å› ç‚ºç¾ä»£äººæ¯”è¼ƒé‡è¦–å‚³å®—æ¥ä»£ã€‚", "(B) é‚„ä¸å°±æ˜¯å› ç‚ºç¶“æ¿Ÿå£“åŠ›å¤§ï¼Œé¤Šå°å­©è²»ç”¨å¤ªé«˜äº†ã€‚", "(C) é€™æ˜¯å› ç‚ºæ”¿åºœå¼·çƒˆæ¨è¡Œä¸€èƒåŒ–æ”¿ç­–çš„çµæœã€‚"], ans: 1 },
            { script: "A: é—œæ–¼é€™æ¬¡çš„è¨ˆåŠƒæ¡ˆï¼Œç¶“ç†å¥½åƒä¸å¤ªæ»¿æ„ï¼Œå«æˆ‘å€‘å†åšä¸€ä»½æ–°çš„ã€‚", q: "12. (è«‹é¸å‡º B æœ€åˆç†çš„å›ç­”)", options: ["(A) æ—¢ç„¶ç¶“ç†éƒ½èª‡çæˆ‘å€‘äº†ï¼Œé‚£æˆ‘å€‘å°±æ”¾å¿ƒäº†ã€‚", "(B) æ²’è¾¦æ³•ï¼Œæˆ‘å€‘åªèƒ½é‡å°ä»–çš„è¦æ±‚ï¼Œå†ä¿®æ”¹ä¸€æ¬¡äº†ã€‚", "(C) å¹¸è™§ç¶“ç†æ²’ç™¼ç¾æˆ‘å€‘çš„éŒ¯èª¤ï¼Œé€™æ¬¡ç®—é‹æ°£å¥½ã€‚"], ans: 1 },
            { script: "A: ä½ çœ‹ï¼é‚£é‚Šç«™äº†å¥½å¤šäººï¼Œå¥½åƒç™¼ç”Ÿäº†ä»€éº¼äº‹ï¼Ÿ", q: "13. (è«‹é¸å‡º B æœ€åˆç†çš„å›ç­”)", options: ["(A) æˆ‘å€‘è¶•å¿«é¿é–‹å§ï¼Œå…å¾—ç¢°ä¸Šéº»ç…©ã€‚", "(B) é‚£äº›äººéƒ½åœ¨æ’éšŠè²·ç¥¨ï¼Œæº–å‚™é€²å»åƒè§€å¤è¹Ÿã€‚", "(C) æ ¹æ“šçµ±è¨ˆï¼Œé‚£è£¡æ˜¯ç™¼ç”Ÿè»Šç¦é »ç‡æœ€é«˜çš„åœ°æ–¹ã€‚"], ans: 1 },
            { script: "A: ç‚ºäº†æº–å‚™ç•¢æ¥­å±•ï¼Œæˆ‘å·²ç¶“ä¸€é€£ç†¬å¤œå¥½æ“ å¤©äº†ã€‚", q: "14. (è«‹é¸å‡º B æœ€åˆç†çš„å›ç­”)", options: ["(A) ä½ é€™æ¨£ä¸‹å»èº«é«”æœƒå£æ‰çš„ï¼Œé‚„æ˜¯è¦æ‰¾æ™‚é–“ä¼‘æ¯ã€‚", "(B) ä½ æ‡‰è©²å¤šç†¬å¤œå¹¾å¤©ï¼Œé€™æ¨£æ‰èƒ½æ—©ä¸€é»ç•¢æ¥­ã€‚", "(C) æ—¢ç„¶ä½ ç²¾ç¥é€™éº¼å¥½ï¼Œæˆ‘å€‘å»å¤œå¸‚åƒå€‹å¤ å§ã€‚"], ans: 0 },
            { script: "A: é€™å€‹è—¥è½èªªå¯ä»¥æ²»å¾ˆå¤šç—…ï¼Œä½ è¦ä¸è¦è²·ä¸€ç“¶è©¦è©¦çœ‹ï¼Ÿ", q: "15. (è«‹é¸å‡º B æœ€åˆç†çš„å›ç­”)", options: ["(A) é€™ç¨®æ²’æœ‰ç§‘å­¸æ ¹æ“šçš„è©±ï¼Œæˆ‘æ‰ä¸ç›¸ä¿¡å‘¢ï¼", "(B) ç•¶ç„¶è¦ï¼Œå› ç‚ºé†«ç”Ÿèªªæˆ‘çš„ç—…å·²ç¶“å¥½å¤šäº†ã€‚", "(C) æ—¢ç„¶æ˜¯å…è²»çš„ï¼Œæˆ‘å°±å¤šè²·å¹¾ç“¶é€çµ¦æœ‹å‹ã€‚"], ans: 0 }
        ],
        part3: [
            { q: "16. é€™æ®µè©±ä¸»è¦åœ¨è¨è«–ä»€éº¼ä¸»é¡Œï¼Ÿ", options: ["(A) å¦‚ä½•è€ƒä¸Šç†æƒ³çš„ç ”ç©¶æ‰€", "(B) å­¸æ­·èˆ‡å·¥ä½œç¶“é©—çš„é—œä¿‚", "(C) ä¼æ¥­å¦‚ä½•é™ä½äººäº‹æˆæœ¬"], ans: 1 },
            { q: "17. æ ¹æ“šé€™æ®µè©±ï¼Œç¾åœ¨ä¼æ¥­åœ¨æ‡‰å¾µæ–°äººæ™‚ï¼Œæœ€çœ‹é‡ä»€éº¼ï¼Ÿ", options: ["(A) ç•¢æ¥­çš„å­¸æ ¡æ˜¯å¦æœ‰å", "(B) æ˜¯å¦å…·å‚™åšå£«å­¸ä½", "(C) å¯¦éš›ç¶“é©—å’Œå·¥ä½œæ…‹åº¦"], ans: 2 },
            { q: "18. ç‚ºä»€éº¼æœ‰äº›é«˜å­¸æ­·çš„å¹´è¼•äººæ±‚è·æœƒç¢°åˆ°å›°é›£ï¼Ÿ", options: ["(A) å› ç‚ºä»–å€‘ä¸é¡˜æ„å¾åŸºå±¤åšèµ·", "(B) å› ç‚ºæ”¿åºœçš„å°±æ¥­æ”¿ç­–ä¸å®Œå–„", "(C) å› ç‚ºä¼æ¥­ä¸éœ€è¦é«˜å­¸æ­·çš„äººæ‰"], ans: 0 },
            { q: "19. æ ¹æ“šé€™æ®µè©±ï¼Œå“ªä¸€ç¨®å­¸ç”Ÿå®¹æ˜“è¢«å¤§å…¬å¸æå‰éŒ„å–ï¼Ÿ", options: ["(A) æˆç¸¾å¥½ä½†æ²’æœ‰ç¤¾åœ˜ç¶“é©—çš„å­¸ç”Ÿ", "(B) ç©æ¥µåƒåŠ å¯¦ç¿’ä¸¦é©æ‡‰è·å ´çš„å­¸ç”Ÿ", "(C) å®¶è£¡å¾ˆæœ‰éŒ¢å¯ä»¥å‡ºåœ‹ç•™å­¸çš„å­¸ç”Ÿ"], ans: 1 },
            { q: "20. å°ˆå®¶å°å¤§å­¸ç”Ÿæå‡ºäº†ä»€éº¼å»ºè­°ï¼Ÿ", options: ["(A) æ‡‰è©²ç¹¼çºŒå¿µåšå£«ï¼Œæé«˜ç«¶çˆ­åŠ›", "(B) ç•¢æ¥­å¾Œæ‡‰è©²å…ˆå»æ‰“å·¥åº¦å‡ï¼Œé–‹é—Šçœ¼ç•Œ", "(C) æ‡‰è©²å¤šç´¯ç©å¯¦å‹™ç¶“é©—ï¼ŒåŸ¹é¤Šè§£æ±ºå•é¡Œçš„èƒ½åŠ›"], ans: 2 }
        ],
        rw1: [
            { q: "21. å¦‚æœéåº¦å®¢æ°£ï¼Œåè€Œæœƒè®“é¢è©¦å®˜è¦ºå¾—ä½ ä¸å¤ _______ã€‚", options: ["(A) æœ‰å¯¦åŠ›", "(B) ç¢ºå¯¦", "(C) å¯¦è¡Œ"], ans: 0 },
            { q: "22. è¨ˆåŠƒéƒ¨å·²ç¶“åšäº†å¥½å¹¾æ¬¡çš„_______ï¼Œå¸Œæœ›èƒ½é¿å…æ‰€æœ‰å¯èƒ½ç™¼ç”Ÿçš„å•é¡Œã€‚", options: ["(A) å¿ƒç†å»ºè¨­", "(B) æ²™ç›¤æ¨æ¼”", "(C) å‚³å®—æ¥ä»£"], ans: 1 },
            { q: "23. é›–ç„¶é€™ä»½å·¥ä½œçš„è–ªæ°´ä¸é«˜...æˆ‘æŠŠå®ƒç•¶ä½œæ˜¯ä¸€ç¨®_______ã€‚", options: ["(A) ç£¨ç·´", "(B) æå¤±", "(C) è² æ“”"], ans: 0 },
            { q: "24. æˆ‘å€‘åœ¨ä½¿ç”¨ç¶²è·¯æ™‚å¿…é ˆè‡ªä»”ç´°å°å¿ƒï¼Œä»¥å…å€‹äººè³‡æ–™è¢«_______ã€‚", options: ["(A) æ²’è½", "(B) ç›œç”¨", "(C) å€’é–‰"], ans: 1 },
            { q: "25. è€å¼µçµ‚æ–¼æœ‰æ©Ÿæœƒå›åˆ°_______çš„å®¶é„‰ã€‚", options: ["(A) ç¨å–„å…¶èº«", "(B) æœæ€æš®æƒ³", "(C) åœæ»¯ä¸å‰"], ans: 1 }
        ],
        rw2: [
            { q: "26. æ—¢ç„¶å·²ç¶“æ±ºå®šè¦çµå©šäº†ï¼Œå°±è©²è² æ“”èµ·è²¬ä»»ï¼Œåˆ¥å†åƒå–®èº«æ™‚é‚£æ¨£ç„¡æ‹˜ç„¡æŸäº†ã€‚", options: ["(A) çµå©šå¾Œé›–ç„¶ä¸è‡ªç”±ï¼Œä½†é‚„æ˜¯å¯ä»¥åƒå–®èº«ä¸€æ¨£ç”Ÿæ´»ã€‚", "(B) çµå©šå°±æœ‰è²¬ä»»ï¼Œä¸èƒ½å†åƒä»¥å‰é‚£æ¨£æƒ³åšä»€éº¼å°±åšä»€éº¼äº†ã€‚", "(C) å³ä½¿çµäº†å©šï¼Œä¹Ÿæ‡‰è©²ä¿æŒå–®èº«æ™‚çš„ç”Ÿæ´»æ–¹å¼ã€‚"], ans: 1 },
            { q: "27. ä»–é€£è‡ªå·±çš„ç”Ÿæ´»è²»éƒ½ä»˜ä¸å‡ºä¾†äº†ï¼Œä½•æ³æ˜¯å€ŸéŒ¢çµ¦ä½ å‘¢ï¼Ÿ", options: ["(A) ä»–å¾ˆæœ‰éŒ¢ï¼Œä¸€å®šæœƒå€ŸéŒ¢çµ¦ä½ ã€‚", "(B) ä»–é›–ç„¶æ²’éŒ¢ï¼Œä½†ä¹Ÿè¨±æœƒå€Ÿçµ¦ä½ ã€‚", "(C) ä»–è‡ªå·±éƒ½æ²’éŒ¢äº†ï¼Œæ›´ä¸å¯èƒ½å€Ÿçµ¦ä½ ã€‚"], ans: 2 },
            { q: "28. é™¤éæ”¿åºœèƒ½æœ‰æ•ˆæ”¹å–„æ‰˜è‚²ç’°å¢ƒï¼Œå¦å‰‡å¾ˆé›£æé«˜å¹´è¼•äººçš„ç”Ÿè‚²æ„é¡˜ã€‚", options: ["(A) åªè¦æ”¿åºœæ”¹å–„æ‰˜è‚²ç’°å¢ƒï¼Œå¹´è¼•äººå°±æœƒæƒ³ç”Ÿå­©å­ã€‚", "(B) å³ä½¿æ”¹å–„äº†ç’°å¢ƒï¼Œå¹´è¼•äººä¹Ÿä¸ä¸€å®šæƒ³ç”Ÿå­©å­ã€‚", "(C) æ”¿åºœä¸æ”¹å–„ç’°å¢ƒï¼Œå¹´è¼•äººåè€Œæ›´æƒ³ç”Ÿå­©å­ã€‚"], ans: 0 },
            { q: "29. é—œæ–¼é€™å®¶å…¬å¸çš„è²¡å‹™ç‹€æ³ï¼Œå¤–ç•Œæœ‰å¾ˆå¤šå‚³è¨€ï¼Œä½†ç©¶ç«Ÿæƒ…æ³å¦‚ä½•ï¼Œç›®å‰é‚„ä¸çŸ¥é“ã€‚", options: ["(A) å¤§å®¶éƒ½å·²ç¶“çŸ¥é“é€™å®¶å…¬å¸çš„è²¡å‹™æ”¿çœŸç›¸äº†ã€‚", "(B) é›–ç„¶æœ‰å¾ˆå¤šæ¶ˆæ¯ï¼Œä½†æ²’æœ‰äººçŸ¥é“çœŸæ­£çš„æƒ…æ³ã€‚", "(C) é€™å®¶å…¬å¸çš„è²¡æ”¿ç‹€æ³éå¸¸å¥½ï¼Œæ²’æœ‰ä»»ä½•å•é¡Œã€‚"], ans: 1 },
            { q: "30. ä»–ä¸ä½†æ²’æœ‰å› ç‚ºå¤±æ•—è€Œæ”¾æ£„ï¼Œåè€Œæ›´åŠ åŠªåŠ›ï¼Œçµ‚æ–¼å¾—åˆ°äº†æˆåŠŸã€‚", options: ["(A) ä»–å¤±æ•—å¾Œå°±æ”¾æ£„äº†ï¼Œæ‰€ä»¥æ²’æœ‰æˆåŠŸã€‚", "(B) å¤±æ•—è®“ä»–è®Šå¾—æ›´åŠªåŠ›ï¼Œæœ€å¾Œå®Œæˆäº†ç›®æ¨™ã€‚", "(C) ä»–é›–ç„¶å¾ˆåŠªåŠ›ï¼Œä½†æœ€å¾Œé‚„æ˜¯å¤±æ•—äº†ã€‚"], ans: 1 }
        ],
        rw3: [
            { q: "31. (1) å…¨çƒç¶“æ¿Ÿ_______", options: ["(A) åœæ»¯ä¸å‰", "(B) çªé£›çŒ›é€²", "(C) å®¶å–»æˆ¶æ›‰", "(D) è½åœ°ç”Ÿæ ¹"], ans: 0 },
            { q: "32. (2) åœ¨é€™æ¨£çš„_______ä¸‹", options: ["(A) å¾µå…†", "(B) æƒ…æ³", "(C) åˆ¶åº¦", "(D) è§€å¿µ"], ans: 1 },
            { q: "33. (3) _______æ„Ÿåˆ°ç„¦æ…®ä¸å®‰", options: ["(A) é›£å…", "(B) ç”šè‡³", "(C) ç›¡é‡", "(D) å§‹çµ‚"], ans: 0 },
            { q: "34. (4) åŠªåŠ›_______å¯¦ç¿’æ©Ÿæœƒ", options: ["(A) æ‡‰å¾µ", "(B) çˆ­å–", "(C) éŒ„å–", "(D) çµ±æ²»"], ans: 1 },
            { q: "35. (5) é‚„èƒ½_______è‡ªå·±æ˜¯å¦é©åˆ", options: ["(A) é æ¸¬", "(B) æ‰¹è©•", "(C) è€ƒé©—", "(D) ç¢ºèª"], ans: 3 },
            { q: "36. (6) ä¹Ÿ_______æé«˜æœªä¾†çš„ç«¶çˆ­åŠ›", options: ["(A) æœ‰åŠ©æ–¼", "(B) ä¾†è‡ª", "(C) ç”±æ–¼", "(D) é—œæ–¼"], ans: 0 },
            { q: "37. (7) å°å…¬å¸æœ‰_______çš„äº†è§£", options: ["(A) æ ¹æœ¬", "(B) åˆæ­¥", "(C) å·¨å¤§", "(D) æ²‰é‡"], ans: 1 },
            { q: "38. (8) _______è¢«æ‹’çµ•äº†", options: ["(A) é™¤é", "(B) åæ­£", "(C) å³ä½¿", "(D) å› æ­¤"], ans: 2 },
            { q: "39. (9) _______ç’°å¢ƒå†å·®", options: ["(A) ç©¶ç«Ÿ", "(B) åæ­£", "(C) ç›¡é‡", "(D) ä¸ç®¡"], ans: 3 },
            { q: "40. (10) _______èƒ½æ‰¾åˆ°å±¬æ–¼è‡ªå·±çš„ä¸€ç‰‡å¤©", options: ["(A) ä»ç„¶", "(B) æœç„¶", "(C) å±…ç„¶", "(D) æ–¼æ˜¯"], ans: 0 }
        ]
    };

    function renderQuestions() {
        renderSection('part1', 'part1-questions');
        renderSection('part2', 'part2-questions');
        renderSection('part3', 'part3-questions');
        renderSection('rw1', 'rw1-questions');
        renderSection('rw2', 'rw2-questions');
        renderSection('rw3', 'rw3-questions');
    }

    function renderSection(key, containerId) {
        const container = document.getElementById(containerId);
        quizData[key].forEach((item, index) => {
            const qDiv = document.createElement('div');
            qDiv.className = 'question-block';
            qDiv.id = `q-${key}-${index}`;
            
            let html = "";
            if (item.script) {
                const safeScript = item.script.replace(/"/g, '&quot;');
                html += `<button type="button" class="btn-play" onclick="speakText(this.getAttribute('data-script'), this)" data-script="${safeScript}">ğŸ”Š æ’­æ”¾éŸ³æª”</button><br>`;
            }

            html += `<span class="question-title">${item.q}</span><div class="options">`;
            item.options.forEach((opt, optIndex) => {
                html += `<label><input type="radio" name="${key}-${index}" value="${optIndex}"> ${opt}</label>`;
            });
            html += `</div>`;
            qDiv.innerHTML = html;
            container.appendChild(qDiv);
        });
    }

    function submitQuiz() {
        if('speechSynthesis' in window) {
            synth.cancel();
        }
        
        const name = document.getElementById('studentName').value;
        if (!name.trim()) {
            alert("è«‹è¼¸å…¥å§“åæˆ–å­¸è™Ÿï¼");
            return;
        }

        let totalScore = 0;
        let reviewHtml = "";
        const pointsPerQuestion = 2;

        for (const [key, questions] of Object.entries(quizData)) {
            questions.forEach((item, index) => {
                const radios = document.getElementsByName(`${key}-${index}`);
                let selected = -1;
                for (let i = 0; i < radios.length; i++) {
                    if (radios[i].checked) {
                        selected = i;
                        break;
                    }
                }

                const qBlock = document.getElementById(`q-${key}-${index}`);
                
                if (selected == item.ans) {
                    totalScore += pointsPerQuestion;
                } else {
                    qBlock.classList.add('wrong-answer');
                    const correctText = item.options[item.ans];
                    reviewHtml += `<div style="margin-bottom:10px; border-bottom:1px solid #ddd; padding-bottom:5px;">
                        <strong>${item.q}</strong><br>
                        <span style="color:red">æ‚¨çš„ç­”æ¡ˆï¼š${selected === -1 ? 'æœªä½œç­”' : item.options[selected]}</span><br>
                        <span style="color:green">æ­£ç¢ºç­”æ¡ˆï¼š${correctText}</span>
                    </div>`;
                    
                    const correctMsg = document.createElement('span');
                    correctMsg.className = 'correct-answer-text';
                    correctMsg.innerText = `æ­£ç¢ºç­”æ¡ˆï¼š${correctText}`;
                    if(!qBlock.querySelector('.correct-answer-text')) {
                         qBlock.appendChild(correctMsg);
                    }
                }
            });
        }

        document.getElementById('quizForm').style.display = 'none';
        document.getElementById('result').style.display = 'block';
        document.getElementById('resultName').innerText = name;
        document.getElementById('score').innerText = totalScore;
        
        const reviewContainer = document.getElementById('review');
        if (reviewHtml === "") {
            reviewContainer.innerHTML = "<p>æ­å–œï¼å…¨å°ï¼å¤ªå²å®³äº†ï¼ğŸ‰</p>";
        } else {
            reviewContainer.innerHTML = "<h4>éŒ¯é¡Œæª¢è¨ï¼š</h4>" + reviewHtml;
        }
        window.scrollTo(0, 0);
    }

    renderQuestions();
</script>

</body>

</html>

